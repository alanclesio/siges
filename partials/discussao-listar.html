<div ng-show="usuarioLogado.admin">
    <div class="page-title">
        <h2><i class="icon-desktop color"></i> Notas
            <small>Cadastro de notas</small>
        </h2>
        <hr>
    </div>
    <div class="awidget clearfix">
        <div class="awidget-head">
            <h3>Filtre as turmas por disciplina</h3>
        </div>
        <div class="awidget-body">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group" ng-class="{'has-error': dadosAvalicao.instituicao.$invalid}">
                        <label class="control-label">Instituição</label>
                        <select name="instituicao" class="form-control" ng-model="avaliacao.instituicaoId"
                                ng-options="instituicao.$id as instituicao.nome for instituicao in instituicoes"
                                autofocus required>
                            <option value="">Selecione</option>
                        </select>
                        <span ng-show="dadosAvalicao.instituicao.$error.required" class="help-block">Campo de preenchimento necessário</span>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group" ng-class="{'has-error': dadosAvalicao.disciplina.$invalid}">
                        <label class="control-label">Disciplina</label>
                        <select name="disciplina" class="form-control" ng-model="pesquisa.disciplinaId"
                                ng-options="disciplina.$id as disciplina.nome for disciplina in disciplinas  | filter:{instituicaoId:avaliacao.instituicaoId}"
                                ng-disabled="!avaliacao.instituicaoId" required>
                            <option value="">Selecione</option>
                        </select>
                        <span ng-show="dadosAvalicao.disciplina.$error.required" class="help-block">Campo de preenchimento necessário</span>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-6 col-md-4" style="margin-bottom: 10px;"
                     ng-repeat="turma in turmas | filter:pesquisa:strict | orderBy:['nome']">
                    <div class="thumbnail">
                        <div class="caption">
                            <h3 style="margin-top: 0">{{ turma.nome }}</h3>

                            <p style="margin-bottom: 10px;">{{ turma.informacoes | truncate:30 }}</p>

                            <div class="btn-group" ng-show="(avaliacoes | filter:{turmaId:turma.$id}).length">
                                <button type="button" class="btn btn-info dropdown-toggle" data-toggle="dropdown">Seleciona a avaliação <span class="caret"></span></button>
                                <ul class="dropdown-menu" role="menu">
                                    <li ng-repeat="avaliacao in avaliacoes | filter:{turmaId:turma.$id}"><a href="#/notas/criar/{{avaliacao.$id}}">{{ avaliacao.nome }}</a></li>
                                </ul>
                            </div>
                            <p ng-show="(avaliacoes | filter:{turmaId:turma.$id}).length == 0">
                                <a href="" class="btn btn-default disabled" title="Não existem avaliações cadastradas para esta turma." role="button">Sem avaliação cadastrada</a>
                            </p>
                        </div>
                    </div>
                </div>
                <div class="col-sm-6 colmd-4">
                    <div class="thumbnail" ng-show="(turmas | filter:pesquisa:strict).length == 0">
                        <div class="caption">
                            <h3 style="margin-top: 0">Não há turmas para mostrar</h3>

                            <p style="margin-bottom: 10px;">Tente cadastrar uma turma.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>